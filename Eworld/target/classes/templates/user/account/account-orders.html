<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="bs::layout(~{::section})">

<head>
</head>

<body>


	<!--start page content-->
	<div class="page-content">


		<!--start product details-->
		<section class="section-padding">
			<div class="container">
				<div class="d-flex align-items-center px-3 py-2 border mb-4">
					<div class="text-start">
						<h4 class="mb-0 h4 fw-bold">Account - Orders</h4>
					</div>
				</div>
				<div
					class="btn btn-dark btn-ecomm d-xl-none position-fixed top-50 start-0 translate-middle-y"
					data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbarFilter">
					<span><i class="bi bi-person me-2"></i>Account</span>
				</div>
				<div class="row">
					<div class="col-12 col-xl-3 filter-column">
						<div
							th:replace="user/account/account-menu-fragment :: account-menu"></div>
					</div>
					<div class="col-12 col-xl-9">

						<div class="card rounded-0 mb-3" th:each="order : ${orders}">
							<div class="card-body">
								<div class="d-flex flex-column flex-xl-row gap-3">
									<div class="product-img">
										<img style="height: 25vh;"
											th:src="@{'/product_img/' + ${order.product.productImages[0].productPic}}"
											width="120" alt="">
									</div>
									<div class="product-info flex-grow-1">
										<h5 class="fw-bold mb-1" th:text="${order.product.name}"></h5>
										<p class="mb-0" th:text="${order.product.category.title}"></p>
										<div class="mt-3 hstack gap-2">
											<div class="btn btn-sm border rounded-0"
												th:text="${'&#8377 ' + order.finalPrice}"></div>
											<div class="btn btn-sm border rounded-0"
												th:text="${'Qty: ' + order.quantity}"></div>
										</div>
										<a th:if="${order.deliveryStatus.getStatus() != 'Completed' && order.deliveryStatus.getStatus() != 'Cancelled'}"
											class="btn btn-sm btn-outline-danger border rounded-2 mt-2">Cancel
											Order</a>
									</div>
									<div class="d-none d-xl-block vr"></div>
									<div class="d-grid align-self-start align-self-xl-center">
										<button type="button" class="btn btn-outline-dark btn-ecomm">View
											Details</button>
									</div>
								</div>
							</div>
							<div class="card-footer rounded-0 bg-transparent">
								<div class="d-flex justify-content-between align-items-center">
									<div
										th:attr="class=${order.deliveryStatus.getStatus() == 'Completed' ? 'badge rounded-pill bg-success' : 
						                   order.deliveryStatus.getStatus() == 'Cancelled' ? 'badge rounded-pill bg-danger' : 
						                   'badge rounded-pill bg-warning'}"
										th:text="${order.deliveryStatus.getStatus()}">Status</div>


									<a th:href="@{/user/product/rating}"
										class="text-right mb-1 fw-bold">Rate & Review Product</a>
								</div>

							</div>
						</div>

					</div>
				</div>
				<!--end row-->
			</div>
		</section>
		<!--start product details-->


	</div>
	<!--end page content-->


</body>

</html>