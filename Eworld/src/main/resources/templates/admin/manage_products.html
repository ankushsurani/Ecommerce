<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="admin/adminbs::layout(~{::body})">
<head>

</head>
<body class="" data-bs-spy="scroll" data-bs-target="#navSection"
	data-bs-offset="140">


	<!--  BEGIN CONTENT AREA  -->
	<div id="content" class="main-content">

		<div class="layout-px-spacing">

			<div class="middle-content container-xxl p-0">

				<!-- BREADCRUMB -->
				<div class="page-meta">
					<nav class="breadcrumb-style-one" aria-label="breadcrumb">
						<ol class="breadcrumb">
							<li class="breadcrumb-item active" aria-current="page">Manage Products</li>
						</ol>
					</nav>
				</div>
				<!-- /BREADCRUMB -->

				<div class="row layout-top-spacing">

					<div class="col-xl-12 col-lg-12 col-sm-12  layout-spacing">
						<div class="widget-content widget-content-area br-8">
							<table id="ecommerce-list" class="table dt-table-hover"
								style="width: 100%">
								<thead>
									<tr>
										<th class="checkbox-column"></th>
										<th>Product</th>
										<th>Added on</th>
										<th>Status</th>
										<th>Price</th>
										<th class="no-content text-center">Action</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="product, productStat : ${products}">
										<td th:text="${productStat.index + 1}"></td>
										<td><a th:href="@{'/product/' + ${product.id}}">
												<div class="d-flex justify-content-left align-items-center">
													<div class="avatar  me-3">
														<img
															th:src="@{'/product_img/' + ${product.productImages[0].productPic}}"
															alt="Avatar" width="64" height="64">
													</div>
													<div class="d-flex flex-column">
														<span class="text-truncate fw-bold"
															th:text="${product.name}"></span>
													</div>
												</div>
										</a></td>
										<td
											th:text="${#temporals.format(product.addedDate, 'dd/MM/yyyy')}"></td>

										<td><span class="badge badge-danger"
											th:if="${product.quantity == 0}">Out of stock</span> <span
											class="badge badge-warning"
											th:if="${product.quantity <= 25 && product.quantity != 0}">Low
												Stock</span> <span class="badge badge-success"
											th:if="${product.quantity > 25}">In Stock</span></td>
										<td
											th:text="${'&#8377;' + product.getPriceAfterApplyingDiscount()}"></td>
										<td class="text-center">
											<div class="dropdown">
												<a class="dropdown-toggle" href="#" role="button"
													id="dropdownMenuLink1" data-bs-toggle="dropdown"
													aria-haspopup="true" aria-expanded="true"> <svg
														xmlns="http://www.w3.org/2000/svg" width="24" height="24"
														viewBox="0 0 24 24" fill="none" stroke="currentColor"
														stroke-width="2" stroke-linecap="round"
														stroke-linejoin="round"
														class="feather feather-more-horizontal">
														<circle cx="12" cy="12" r="1"></circle>
														<circle cx="19" cy="12" r="1"></circle>
														<circle cx="5" cy="12" r="1"></circle></svg>
												</a>

												<div class="dropdown-menu"
													aria-labelledby="dropdownMenuLink1">
													<a class="dropdown-item" href="javascript:void(0);">Edit</a>
													<a class="dropdown-item" href="javascript:void(0);">Delete</a>
												</div>
											</div>
										</td>
									</tr>


								</tbody>

							</table>
							<div class="paginating-container pagination-default">
								<ul class="pagination">
									<li class="prev"><a href="javascript:void(0);"
										onclick="decreasePage()">Prev</a></li>

									<li class="next"><a href="javascript:void(0);"
										onclick="increasePage()">Next</a></li>

									<div id="hasNextPageData"
										th:attr="data-hasNextPage=${hasNextPage}"
										style="display: none;"></div>
								</ul>
							</div>
						</div>
					</div>

				</div>

			</div>

		</div>



	</div>
	<!--  END CONTENT AREA  -->
	</div>
	<!-- END MAIN CONTAINER -->

	<!-- BEGIN GLOBAL MANDATORY STYLES -->
	<script src="../src/plugins/src/global/vendors.min.js"></script>
	<script src="../src/bootstrap/js/bootstrap.bundle.min.js"></script>
	<script
		src="../src/plugins/src/perfect-scrollbar/perfect-scrollbar.min.js"></script>
	<script src="../src/plugins/src/mousetrap/mousetrap.min.js"></script>
	<script src="../src/plugins/src/waves/waves.min.js"></script>
	<script src="../layouts/web-app/app.js"></script>
	<script src="../src/assets/js/custom.js"></script>
	<!-- END GLOBAL MANDATORY STYLES -->

	<!-- BEGIN PAGE LEVEL SCRIPTS -->
	<script src="../src/plugins/src/table/datatable/datatables.js"></script>
	<script>
        ecommerceList = $('#ecommerce-list').DataTable({
            headerCallback:function(e, a, t, n, s) {
                e.getElementsByTagName("th")[0].innerHTML=`
                <div class="form-check form-check-primary d-block new-control">
                    <input class="form-check-input chk-parent" type="checkbox" id="form-check-default">
                </div>`
            },
            columnDefs:[ {
                targets:0, width:"30px", className:"", orderable:!1, render:function(e, a, t, n) {
                    return `
                    <div class="form-check form-check-primary d-block new-control">
                        <input class="form-check-input child-chk" type="checkbox" id="form-check-default">
                    </div>`
                }
            }],
            "dom": "<'dt--top-section'<'row'<'col-12 col-sm-6 d-flex justify-content-sm-start justify-content-center'l><'col-12 col-sm-6 d-flex justify-content-sm-end justify-content-center mt-sm-0 mt-3'f>>>" +
        "<'table-responsive'tr>" +
        "<'dt--bottom-section d-sm-flex justify-content-sm-between text-center'<'dt--pages-count  mb-sm-0 mb-3'i><'dt--pagination'p>>",
            "oLanguage": {
                "oPaginate": { "sPrevious": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>', "sNext": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>' },
                "sInfo": "Showing page _PAGE_ of _PAGES_",
                "sSearch": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>',
                "sSearchPlaceholder": "Search...",
               "sLengthMenu": "Results :  _MENU_",
            },
            "stripeClasses": [],
            "lengthMenu": [7, 10, 20, 50],
            "pageLength": 10 
        });
        multiCheck(ecommerceList);
        
        
        
        
      //next page
		function increasePage() {
			var currentUrl = window.location.href;
			var currentPage = parseInt(currentUrl.match(/page=(\d+)/)[1]);

			var hasNextPageData = document
					.getElementById('hasNextPageData');
			var hasNextPageValue = hasNextPageData
					.getAttribute('data-hasNextPage');
			var hasNextPage = hasNextPageValue === 'true'; // Convert the string to a boolean

			if (hasNextPage) {
				var updatedUrl = currentUrl.replace(/(page=)(\d+)/,
						function(match, prefix, page) {
							var nextPage = parseInt(page) + 1;
							return prefix + nextPage;
						});

				window.location.href = updatedUrl;
			} else {
				var nextButton = document.getElementById('next-button');
				nextButton.classList.add('disabled');
				nextButton.setAttribute('disabled', 'disabled');
			}
		}

		//prev page
		function decreasePage() {
			var currentUrl = window.location.href;
			var currentPage = parseInt(currentUrl.match(/page=(\d+)/)[1]);

			if (currentPage > 0) {
				var updatedUrl = currentUrl.replace(/(page=)(\d+)/,
						function(match, prefix, page) {
							var prevPage = parseInt(page) - 1;
							return prefix + prevPage;
						});

				window.location.href = updatedUrl;
			} else {
				// Disable the "Previous" button or handle it as needed
				// For example, add the 'disabled' class to the button
				var prevButton = document.getElementById('prev-button'); // Replace with your button ID
				prevButton.classList.add('disabled text-muted');
				prevButton.setAttribute('disabled', 'disabled');
			}
		}
    </script>
	<!-- END PAGE LEVEL SCRIPTS -->
</body>
</html>