<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="bs::layout(~{::section})">
<head>

</head>
<body>





	<!-- Start Compare Area -->
	<section class="compare-area"
		style="padding-top: 50px; padding-bottom: 50px;">
		<div class="container">

			<!-- messages of success and error -->
			<div th:if="${session.message}" class="text-center">
				<div th:classappend="${session.message.type}"
					class="alert alert-primary" role="alert">
					<span th:text="${session.message.content}"></span>
				</div>
				<th:block th:text="${#session.removeAttribute('message')}"></th:block>
			</div>
			<!-- end error and success message -->

			<div th:if="${#lists.size(productCompareItems) == 0}"
				class="error-area">
				<div class="container">
					<div class="error-content">
						<img th:src="@{/images/compare-with-other-products.png}"
							alt="error">
						<h3 class="animate-charcter">Add items to Compare Features!</h3>
						<p>You can compare product within same category.</p>
						<a th:href="@{/product/page=0}" class="default-btn"><i
							class='bx bx-git-compare'></i> Compare now</a>
					</div>
				</div>
			</div>

			<div th:unless="${#lists.size(productCompareItems) == 0}"
				class="products-compare-table table-responsive">

				<a
					th:if="${#lists.size(productCompareItems) >= 1 && #lists.size(productCompareItems) < 4}"
					th:href="@{'/product/page=0?categoryId=' + ${productCompareItems[0][0].product.category.id}}"
					class="default-btn mb-5"><i class='bx bx-git-compare'></i>
					Compare With More</a>

				<table class="table table-bordered">
					<tbody>
						<tr>
							<td><b>Compare <span
									th:text="${productCompareItems[0][0].product.name}"></span> VS
									others
							</b></td>
							<td th:each="productCompareItem : ${productCompareItems}">
								<div class="remove-btn">
									<a
										th:href="@{'/user/product-compare/remove-product-from-comparison/' + ${productCompareItem[0].id}}"
										class="remove"><i class='bx bx-trash'></i></a>
								</div>

								<div class="single-products-box">
									<div class="products-image">
										<a
											th:href="@{'/product/' + ${productCompareItem[0].product.id}}">
											<img style="max-height: 30vh;"
											th:src="@{'/product_img/' + ${productCompareItem[0].product.productImages[0].productPic}}"
											class="main-image" alt="image"> <img
											style="max-height: 30vh;"
											th:src="@{'/product_img/' + ${productCompareItem[0].product.productImages[1].productPic}}"
											class="hover-image" alt="image">
										</a>
									</div>

									<div class="products-content">
										<h3>
											<a
												th:href="@{'/product/' + ${productCompareItem[0].product.id}}"
												th:text="${productCompareItem[0].product.name}"></a>
										</h3>
										<div class="price">
											<span class="old-price me-2"
												th:text="${'&#8377;' + productCompareItem[0].product.price}"></span>
											<span class="new-price me-2"
												th:text="${'&#8377;' + productCompareItem[0].product.getPriceAfterApplyingDiscount()}"></span>

											<span class="text-success me-2"><span
												th:text="${productCompareItem[0].product.discount}"></span>%
												off</span>
										</div>

										<a
											th:href="@{'/user/cart/add-to-cart/' + ${productCompareItem[0].product.id}}"
											class="add-to-cart">Add to Cart</a>
									</div>
								</div>
							</td>


						</tr>

						<tr>
							<td>Rating & Reviews</td>
							<td th:each="productCompareItem : ${productCompareItems}"><div
									class="star-rating">
									<span th:each="i : ${#numbers.sequence(1, 5)}"> <i
										th:if="${productCompareItem[0].product.avgRating >= i}"
										th:class="'bx bxs-star text-warning'"></i> <i
										th:unless="${productCompareItem[0].product.avgRating >= i}"
										th:if="${productCompareItem[0].product.avgRating >= i - 0.5}"
										th:class="'bx bxs-star-half text-warning'"></i> <i
										th:unless="${productCompareItem[0].product.avgRating >= i || productCompareItem[0].product.avgRating >= i - 0.5}"
										th:class="'bx bx-star text-warning'"></i>
									</span> <span class="text-dark fw-bold"
										th:text="${productCompareItem[0].product.avgRating}"></span>
								</div></td>
						</tr>

						<tr>
							<td>Description</td>
							<td th:each="productCompareItem : ${productCompareItems}"><a
								th:href="@{'/product/' + ${productCompareItem[0].product.id}}"
								th:utext="${#strings.length(productCompareItem[0].product.description) > 20 ? 
								#strings.substring(productCompareItem[0].product.description, 0, 20) + '...' 
								: productCompareItem[0].product.description}"></a>
							</td>
						</tr>

						<tr>
							<td>Brand</td>
							<td th:each="productCompareItem : ${productCompareItems}"><span
								th:text="${productCompareItem[0].product.brandName}"></span></td>
						</tr>



						<tr>
							<td>Availability</td>
							<td th:each="productCompareItem : ${productCompareItems}"><mark>in
									stock</mark> <span th:text="${productCompareItem[0].product.quantity}"></span>
								item(s)</td>
						</tr>

						<tr>
							<td>Delivery</td>
							<td th:each="productCompareItem : ${productCompareItems}"><span
								th:text="${productCompareItem[1]}"></span></td>
						</tr>

						<tr>
							<td>Warranty</td>
							<td th:each="productCompareItem : ${productCompareItems}"><a
								th:if="${productCompareItem[0].product.warranty != null}"
								th:href="@{'/product/' + ${productCompareItem[0].product.id}}"
								th:utext="${#strings.length(productCompareItem[0].product.warranty) > 60 ? 
								#strings.substring(productCompareItem[0].product.warranty, 0, 60) + '...' 
								: productCompareItem[0].product.warranty}"></a>

								<a th:unless="${productCompareItem[0].product.warranty != null}">
									There is no any warranty related information for this product </a></td>
						</tr>


					</tbody>
				</table>
			</div>
		</div>
	</section>
	<!-- End Compare Area -->


</body>
</html>